
## ğŸ—ƒï¸ æ•°æ®åº“æ ¸å¿ƒç»“æ„è®¾è®¡ï¼ˆMongoDB with Mongooseï¼‰

### 1. User ç”¨æˆ·è¡¨

| å­—æ®µ                 | ç±»å‹     | æè¿°                |
| -------------------- | -------- | ------------------- |
| `_id`                | ObjectId | MongoDB é»˜è®¤ä¸»é”®    |
| `userId`             | String   | ç”¨æˆ·2050 IDï¼ˆå”¯ä¸€ï¼‰ |
| `nickname`           | String   | ç”¨æˆ·æ˜µç§°            |
| `totalScore`         | Number   | å½“å‰æ€»ç§¯åˆ†          |
| `questionsCompleted` | Number   | ç´¯è®¡å®Œæˆé¢˜ç›®æ•°      |
| `rewardsClaimed`     | [String] | å·²é¢†å–å¥–åŠ±IDæ•°ç»„    |

### 2. Match æ¯”èµ›è®°å½•è¡¨

| å­—æ®µ        | ç±»å‹     | æè¿°          |
| ----------- | -------- | ------------- |
| `_id`       | ObjectId | ä¸»é”®          |
| `user1`     | String   | é€‰æ‰‹A 2050 ID |
| `user2`     | String   | é€‰æ‰‹B 2050 ID |
| `rounds`    | Array    | ä¸‰è½®æ¯”èµ›æ•°æ®  |
| `createdAt` | Date     | åˆ›å»ºæ—¶é—´      |

æ¯ä¸€è½®æ•°æ®ç¤ºä¾‹ï¼š

```js
{
  questionIds: [String], // ä¸‰é“é¢˜ ID
  user1Score: Number,
  user2Score: Number,
  user1GaveDifficulty: String, // easy | medium | hard
  user2GaveDifficulty: String
}
```

### 3. Question é¢˜ç›®è¡¨

| å­—æ®µ         | ç±»å‹     | æè¿°                                                  |
| ------------ | -------- | ----------------------------------------------------- |
| `_id`        | ObjectId | ä¸»é”®                                                  |
| `content`    | String   | é¢˜å¹²                                                  |
| `options`    | Object   | é€‰é¡¹ï¼Œå¦‚ `{ A: '...', B: '...', C: '...', D: '...' }` |
| `answer`     | String   | æ­£ç¡®ç­”æ¡ˆ                                              |
| `difficulty` | String   | easy                                                  |
| `topic`      | String   | çŸ¥è¯†ç‚¹åˆ†ç±»                                            |

### 4. Reward å¥–åŠ±è¡¨

| å­—æ®µ                  | ç±»å‹     | æè¿°                   |
| --------------------- | -------- | ---------------------- |
| `_id`                 | ObjectId | ä¸»é”®                   |
| `name`                | String   | å¥–åŠ±åç§°ï¼Œå¦‚â€œè´´çº¸ç›²ç›’â€ |
| `type`                | String   | å¥–åŠ±ç±»å‹ï¼Œå¦‚ç§¯åˆ†ã€é¢˜é‡ |
| `unlockedByScore`     | Number   | è¾¾åˆ°ç§¯åˆ†è§£é”ï¼ˆå¯é€‰ï¼‰   |
| `unlockedByQuestions` | Number   | è¾¾åˆ°é¢˜é‡è§£é”ï¼ˆå¦‚270ï¼‰  |
| `description`         | String   | å¥–åŠ±è¯´æ˜               |

---

## âœ… å¼€å‘è¦æ±‚ä¸æ¥å£æ¦‚è§ˆï¼ˆç®€è¦ï¼‰

### åç«¯ Express API ç¤ºä¾‹

- `POST /login` - è¾“å…¥2050IDç™»å½•
- `POST /match` - åˆ›å»ºæ¯”èµ›è®°å½•
- `POST /match/:id/choose-difficulty` - ä¸ºå¯¹æ‰‹å‡ºé¢˜
- `POST /match/:id/start-round` - ç¡®è®¤å‡†å¤‡å®Œæˆï¼ˆä¸è¿”å›é¢˜ï¼‰
- `POST /match/:id/submit-answer` - æäº¤ç­”é¢˜ç»“æœå¹¶æ›´æ–°ç§¯åˆ†ä¸é¢˜é‡
- `GET /rewards/:userId` - è·å–å¥–åŠ±
- `GET /leaderboard` - è·å–æ’è¡Œæ¦œ
- `GET /questions/pool` - è·å–é¢˜ç›®æ± ç”¨äºå‰ç«¯æŠ½é¢˜

### å‰ç«¯äº¤äº’é‡ç‚¹

- Step 2ï¼šå‡ºé¢˜åæ˜¾ç¤ºâ€œç­‰å¾…å¯¹æ‰‹â€ â†’ â€œå¯¹æ–¹å·²å‡ºé¢˜â€æç¤º
- Step 3ï¼šç­”é¢˜é¡µé¢éœ€æ”¯æŒæŠ½é¢˜åŠ¨ç”»ã€é”å®šé¢˜ç›®ã€é€‰é¡¹é”å®šä¸å€’è®¡æ—¶
- æ¯”èµ›ç»“æœé¡µæç¤ºç§¯åˆ† + å¥–åŠ±çŠ¶æ€ + å†æ¥ä¸€å±€é€‰é¡¹ï¼ˆä¸åŒä¸€äºº / æ–°äººåŒ¹é…ï¼‰

---

## ğŸ“Œ åç»­å»ºè®®

- å¯å¼•å…¥äºŒç»´ç æ‰«ç åŒ¹é…åŠŸèƒ½ï¼ˆçº¿ä¸‹å¢å¼ºï¼‰
- æ·»åŠ åˆ†äº«å›¾ç‰‡ç”ŸæˆåŠŸèƒ½ï¼ˆåæœŸï¼‰

---

å¦‚éœ€æ¥å£å­—æ®µè®¾è®¡æ–‡æ¡£ã€Mock æ•°æ®ç¤ºä¾‹ã€æˆ–åŸå‹å›¾ï¼Œå¯åç»­è¡¥å……æ•´ç†ã€‚

